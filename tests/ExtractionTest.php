<?php declare(strict_types=1);

use PHPUnit\Framework\TestCase;
use PHPUnit\Framework\Attributes\CoversClass;

#[CoversClass(\Mitwork\Kalkan\Services\KalkanExtractionService::class)]
final class ExtractionTest extends TestCase
{
    public function testCmsExtractionIsWorking(): void
    {
        $service = new \Mitwork\Kalkan\Services\KalkanExtractionService();

        $data = <<<DATA
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
DATA;

        $result = $service->extractCms($data);

        $this->assertIsString($result, 'CMS Extraction is not working');
        $this->assertEquals('test', $result, 'CMS Extraction result is not valid');
    }
}
